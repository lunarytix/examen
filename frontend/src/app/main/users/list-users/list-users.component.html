<mat-card>
  <mat-card-title>

      <div  fxLayoutAlign="end">
        <button
              color="primary"
              mat-mini-fab
              (click)="createUser()">
          <mat-icon >person_add</mat-icon>
        </button>
      </div>

  </mat-card-title>

  <mat-card-content>


    <div class="">

      <div class="table-container">

        <table mat-table
               [dataSource]="dataSource"
               matSort
              #tableSort="matSort"
              matSortActive="id"
              matSortDirection="desc">

          <ng-container matColumnDef="ID">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let element">{{element.id}}</td>
          </ng-container>

          <ng-container matColumnDef="Nombre">
            <th mat-header-cell *matHeaderCellDef>Nombre</th>
            <td mat-cell *matCellDef="let element">{{element.nombreCompleto | uppercase}}</td>
          </ng-container>


          <ng-container matColumnDef="Empresa">
            <th mat-header-cell *matHeaderCellDef class="ocultar">Empresa</th>
            <td mat-cell *matCellDef="let element" class="ocultar">{{element?.empresa?.nombreComercial | uppercase}}</td>
          </ng-container>

          <ng-container matColumnDef="Correo">
            <th mat-header-cell *matHeaderCellDef class="ocultar">Correo</th>
            <td mat-cell  *matCellDef="let element" class="ocultar">{{element.correo | uppercase}}</td>
          </ng-container>

          <ng-container matColumnDef="Estado">
            <th mat-header-cell *matHeaderCellDef class="ocultar" style="text-align: center;" >Estado</th>
            <td mat-cell  *matCellDef="let element" class="ocultar" style="text-align: center;">
              <button mat-button *ngIf="element.verificado" class="label-primary" style="pointer-events: none;">ACTIVO</button>
              <button mat-button *ngIf="!element.verificado" class="label-red" style="pointer-events: none;">PENDIENTE</button>
            </td>
          </ng-container>

          <ng-container matColumnDef="Opción" >
            <th mat-header-cell *matHeaderCellDef style="text-align: center;">Opciones</th>
            <td mat-cell *matCellDef="let element" style="text-align: center;">

              <button mat-icon-button [matMenuTriggerFor]="menuOpciones" >
                <mat-icon>more_vert</mat-icon>
              </button>


              <mat-menu #menuOpciones xPosition="before">
                <button mat-menu-item
                        (click)="updateUser(element)">
                  <mat-icon>edit</mat-icon>
                  <span>Editar</span>
                </button>

                <button mat-menu-item
                        (click)="asignarPermisos(element)">
                  <mat-icon>lock</mat-icon>
                  <span color="primary">Permisos</span>
                </button>

                <button mat-menu-item
                        (click)="asignarEmpresas(element)">
                  <mat-icon>business</mat-icon>
                  <span color="primary">Empresas</span>
                </button>

                <button mat-menu-item
                        (click)="updatePassword(element)">
                  <mat-icon>fingerprint</mat-icon>
                  <span>Cambiar contraseña</span>
                </button>

                <button mat-menu-item
                        (click)="deleteUser(element)">
                  <mat-icon>delete</mat-icon>
                  <span>Dar de baja</span>
                </button>


              </mat-menu>

            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr
              mat-row
              *matRowDef="let row; columns: displayedColumns;"
          ></tr>
        </table>

      </div>

    </div>

  </mat-card-content>




</mat-card>
